#!/usr/bin/env python3
colors = {'green': "pwr", 'red': "status"}
on_off = {"on": '1', "off": '0'}
modes = ['none', 'rc-feedback', 'kbd-scrolllock', 'kbd-numlock', 'kbd-capslock', 'kbd-kanalock', 'kbd-shiftlock',
         'kbd-altgrlock', 'kbd-ctrllock', 'kbd-altlock', 'kbd-shiftllock', 'kbd-shiftrlock', 'kbd-ctrlllock',
         'kbd-ctrlrlock', 'usbport', 'mmc0', 'disk-activity', 'ide-disk', 'mtd', 'nand-disk', 'heartbeat', 'cpu',
         'cpu0', 'cpu1', 'cpu2', 'cpu3', 'default-on', 'panic', 'mmc1', 'rfkill-any', 'rfkill0', 'phy0rx', 'phy0tx',
         'phy0assoc', 'phy0radio', 'rfkill1', 'phy1rx', 'phy1tx', 'phy1assoc', 'phy1radio', 'phy1tpt', '0.1:01:100Mbps',
         '0.1:01:10Mbps']


def led_mode(color, mode="on"):
    # Only switch led if board is Orange Pi Zero
    board = open("/var/run/machine.id", 'r').read()
    if "Orange Pi Zero" not in board:
        return 1

    trigger = open("/sys/class/leds/orangepi:" + color + ":" + colors[color] + "/trigger", 'w')
    brightness = open("/sys/class/leds/orangepi:" + color + ":" + colors[color] + "/brightness", 'w')

    if mode in on_off:
        brightness.write(on_off[mode])
    elif mode in modes:
        brightness.write(on_off["on"])
        trigger.write(mode)

    brightness.close()
    trigger.close()
    return 0
