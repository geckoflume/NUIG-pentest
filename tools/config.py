#!/usr/bin/env python3
import configparser
import os
from datetime import datetime

from tests import Test


class Config:
    airodump_scan_duration = 10

    def __init__(self, path):
        self.path = path
        self.config = configparser.ConfigParser()
        self._read()
        self._parse()

    def _read(self):
        self.config.read(self.path)

    def _parse(self):
        self.results_dir = self.config['General']['ResultsDir']
        self.results_dir_format = self.config['General']['ResultsDirFormat']
        Test.results_path = os.getcwd() + "/" + self.results_dir + "/" + datetime.now().strftime(
            self.results_dir_format) + "/"
        self.temp_dir = self.config['General']['TempDir']
        Test.tmp_path = Test.results_path + self.temp_dir + "/"
        self.interface = self.config['Network']['Interface']
        Test.interface.name = self.interface
        Config.airodump_scan_duration = int(self.config['Airodump']['ScanDuration'])

    def __str__(self):
        return "Config:" + "\nResults dir:" + self.results_dir + "\nResults dir format:" + self.results_dir_format + \
               "\nResults path:" + Test.results_path + "\nTemp dir:" + self.temp_dir + "\nInterface:" + self.interface \
               + "\nAirodump scan duration:" + str(Config.airodump_scan_duration)
