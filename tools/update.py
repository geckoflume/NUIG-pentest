#!/usr/bin/env python3
import re
from urllib import request

from tests import Test
from tools.config import Config


class Update(Test):
    def __init__(self):
        Test.__init__(self)

    def update_ssid(self):
        self.title = "SSID dictionary update"
        self.code = 1
        self.pre_run()
        with request.urlopen(Config.mdk3_ssids_url) as response, open(Config.mdk3_ssids, 'w') as out_file:
            if response:
                lines = response.readlines()
                del lines[0]
                for line in lines:
                    ssid = re.sub(r'.*,', '', line.decode())
                    out_file.write(ssid)
                self.code = 0
        self.end()
