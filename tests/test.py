#!/usr/bin/env python3
from tools.interface import Interface
from tools.leds import led_mode


class Test:
    results_path = ''
    tmp_path = ''
    interface = Interface()
    ip = ''
    network = ''
    score = 0

    def __init__(self):
        # Turning on the red LED
        led_mode("red", "on")
        # Test report title
        self.title = ''
        # Test report description
        self.desc = ''
        # Test report vulnerability
        self.vulnerability = ''
        # Test report exploit
        self.exploit = ''
        # Test report v
        self.countermeasure = ''
        # Test report raw results
        self.results = ''
        # Test report filename (will output everything to self.filename)
        self.filename = ''
        # Test result code (0 if successful)
        self.code = 0
        # Test score (arbitrary number, e.g. the number of WEP access points)
        self.score = 0

    def build_report(self):
        Test.report.report(self.results_path + self.filename, self.title, self.desc, self.vulnerability, self.exploit,
                           self.countermeasure, self.results, self.code)
        Test.report.add_test(self.title, self.desc, self.vulnerability, self.exploit, self.countermeasure, self.results,
                             self.code, self.score)

    def pre_run(self):
        Test.score += 1
        print("Running " + self.title + "...")

    def end(self):
        led_mode("red", "off")
        if self.code is 0:
            print("[\033[0;32m OK \033[0m] " + self.title)
        else:
            print("[\033[0;31mFAILED\033[0m] " + self.title)
