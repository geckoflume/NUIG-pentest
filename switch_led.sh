#!/bin/bash

if [[ $# -ne 1 ]] || [[ "$1" != "on" && "$1" != "off" && "$1" != "heartbeat" && "$1" != "default" ]]; then
	echo "Syntax : $0 on, $0 off, $0 heartbeat or $0 default"
	exit 1
fi

# Only switch led if board is Orange Pi Zero
if [[ $(cat /var/run/machine.id 2>/dev/null) = "Orange Pi Zero" ]]; then
	if [[ "$1" = "on" ]]; then
		echo 1 > /sys/class/leds/orangepi\:red\:status/brightness
	elif [[ "$1" = "off" ]]; then
		echo 0 > /sys/class/leds/orangepi\:red\:status/brightness
        elif [[ "$1" = "heartbeat" ]]; then
		echo heartbeat > /sys/class/leds/orangepi\:green\:pwr/trigger
        elif [[ "$1" = "default" ]]; then
                echo default-on > /sys/class/leds/orangepi\:green\:pwr/trigger
	fi
fi
